@@include('./partials/html.html')

<head>
    @@include("./partials/title-meta.html", {"title": "Visualizar"})

    @@include('./partials/head-css.html')
</head>

<body>
    <!-- Begin page -->
    <div class="wrapper">

        @@include('./partials/menu.html')

        <!-- ============================================================== -->
        <!-- Start Main Content -->
        <!-- ============================================================== -->

        <div class="content-page">
            <div class="container-fluid p-0 min-vh-100">

                @@include("./partials/page-title.html", {"subtitle": "Portal de projetos", "title":"Visualizar projeto"})

                <div class="row g-0 min-vh-100 w-100">
                    <div class="col-xxl-12">

                        <!-- Project Main Details -->
                        <div class="col-xxl-12">
                            <div class="card card-h-100 rounded-0 rounded-start">
                                <div class="card-header align-items-start p-4">
                                    <div>
                                        <h3 class="mb-1 d-flex fs-xl align-items-center">0006 - Integração de Sistemas de Pagamento</h3>
                                        <span class="badge badge-soft-success fs-xxs badge-label">Em execução</span>
                                        <span class="badge badge-soft-success fs-xxs badge-label">Em andamento</span>
                                    </div>

                                    <!-- Quick Actions -->
                                    <div class="ms-auto">
                                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                           data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Ações
                                        </a>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                            <a class="dropdown-item" href="#">Editar</a>
                                            <a class="dropdown-item" href="#">Favoritar</a>
                                            <a class="dropdown-item" href="#">Compartilhar</a>
                                            <a class="dropdown-item" href="#">EvA Chat</a>
                                            <a class="dropdown-item disabled" href="#" tabindex="-1" aria-disabled="true">Iniciar planejamento</a>
                                            <a class="dropdown-item disabled" href="#" tabindex="-1" aria-disabled="true">Gerar TAP</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="card-body px-4">
                                    <!-- Tabs -->
                                    <ul class="nav nav-tabs nav-bordered mb-3" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-bs-toggle="tab" href="#tab-overview" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Visão geral</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-schedule" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Cronograma</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-monitoring" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Monitoramento</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-governance" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Governança</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-funding" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Captação de recursos</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-risks" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Riscos</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-files" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Arquivos</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-bs-toggle="tab" href="#tab-logbook" role="tab">
                                                <span class="d-none d-md-inline-block align-middle">Diário de bordo</span>
                                            </a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">

                                        <!-- ========================= -->
                                        <!-- TAB: VISÃO GERAL (EXISTENTE) -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade show active" id="tab-overview" role="tabpanel">
                                            <div class="row">
                                                <!-- Card 1 -->
                                                <div class="col px-0">
                                                    <div class="p-3 rounded m-1 border border-dashed">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="avatar-xl">
                                                                <span class="avatar-title rounded-circle" style="background-color: #EEF2F7;">
                                                                    <i class="ti ti-file-text fs-2" style="color: #313A46;"></i>
                                                                </span>
                                                            </div>
                                                            <div>
                                                                <h4 class="mb-1"><span>Situação do cronograma</span></h4>
                                                                <span class="badge badge-label text-bg-light" style="border-radius: 4px;">Em construção</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Card 2 -->
                                                <div class="col px-0">
                                                    <div class="p-3 rounded m-1 border border-dashed">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="avatar-xl">
                                                                <span class="avatar-title rounded-circle" style="background-color: #DDEDF6;">
                                                                    <i class="ti ti-calendar fs-2" style="color: #1C84C6;"></i>
                                                                </span>
                                                            </div>
                                                            <div>
                                                                <h4 class="mb-1"><span>Data de início</span></h4>
                                                                <p class="mb-0 text-muted">04/08/2024</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Card 3 -->
                                                <div class="col px-0">
                                                    <div class="p-3 rounded m-1 border border-dashed">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="avatar-xl">
                                                                <span class="avatar-title rounded-circle" style="background-color: #DDEDF6;">
                                                                    <i class="ti ti-flag fs-2" style="color: #1C84C6;"></i>
                                                                </span>
                                                            </div>
                                                            <div>
                                                                <h4 class="mb-1"><span>Previsão de conclusão</span></h4>
                                                                <p class="mb-0 text-muted">04/08/2025</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Card 4 -->
                                                <div class="col px-0">
                                                    <div class="p-3 rounded m-1 border border-dashed">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="avatar-xl">
                                                                <span class="avatar-title rounded-circle" style="background-color: #DDEDF6;">
                                                                    <i class="ti ti-clock fs-2" style="color: #1C84C6;"></i>
                                                                </span>
                                                            </div>
                                                            <div>
                                                                <h4 class="mb-1"><span>Dias restantes</span></h4>
                                                                <p class="mb-0 text-muted">144 dias</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Card 5 -->
                                                <div class="col px-0">
                                                    <div class="p-3 rounded m-1 border border-dashed">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="avatar-xl">
                                                                <span class="avatar-title rounded-circle" style="background-color: #DDEDF6;">
                                                                    <i class="ti ti-chart-bar fs-2" style="color: #1C84C6;"></i>
                                                                </span>
                                                            </div>
                                                            <div class="flex-grow-1">
                                                                <h4 class="mb-1"><span>Progresso físico</span></h4>
                                                                <div class="d-flex align-items-center gap-2">
                                                                    <p class="text-muted mb-0"><span>50%</span></p>
                                                                    <div class="progress bg-primary bg-opacity-25 progress-sm flex-grow-1 mb-0">
                                                                        <div class="progress-bar bg-primary" role="progressbar" style="width: 50%"
                                                                             aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div><!-- end row -->
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: CRONOGRAMA -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-schedule" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo do Cronograma (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: MONITORAMENTO -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-monitoring" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo do Monitoramento (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: GOVERNANÇA -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-governance" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo de Governança (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: CAPTAÇÃO -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-funding" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo de Captação de recursos (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: RISCOS -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-risks" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo de Riscos (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: ARQUIVOS -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-files" role="tabpanel">
                                            <div class="alert alert-light border mb-0">
                                                <i class="ti ti-info-circle me-1"></i>
                                                Conteúdo de Arquivos (placeholder).
                                            </div>
                                        </div>

                                        <!-- ========================= -->
                                        <!-- TAB: DIÁRIO DE BORDO (NOVO) -->
                                        <!-- ========================= -->
                                        <div class="tab-pane fade" id="tab-logbook" role="tabpanel">

                                            <!-- Header: resumo rápido + ações -->
                                            <div class="d-flex flex-wrap gap-2 align-items-center justify-content-between mb-3">
                                                <div>
                                                    <h4 class="mb-0">Diário de bordo</h4>
                                                    <p class="text-muted mb-0">Histórico do projeto em formato de timeline, com registros rastreáveis de decisões, marcos, riscos e atualizações.</p>
                                                </div>

                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-light" type="button">
                                                        <i class="ti ti-download me-1"></i>Exportar
                                                    </button>
                                                    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#modalNewLogEntry">
                                                        <i class="ti ti-plus me-1"></i>Nova entrada
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Cards de resumo -->
                                            <div class="row g-2 mb-3">
                                                <div class="col-12 col-md-6 col-xl-3">
                                                    <div class="card border mb-0">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="avatar-sm me-2">
                                                                    <span class="avatar-title rounded-circle bg-light text-dark">
                                                                        <i class="ti ti-history"></i>
                                                                    </span>
                                                                </div>
                                                                <div class="flex-grow-1">
                                                                    <div class="text-muted fs-12">Última atualização</div>
                                                                    <div class="fw-semibold">28/08/2025 13:00</div>
                                                                    <div class="text-muted fs-12">Sammys Cezar • Diretoria</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12 col-md-6 col-xl-3">
                                                    <div class="card border mb-0">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="avatar-sm me-2">
                                                                    <span class="avatar-title rounded-circle bg-light text-dark">
                                                                        <i class="ti ti-flag"></i>
                                                                    </span>
                                                                </div>
                                                                <div class="flex-grow-1">
                                                                    <div class="text-muted fs-12">Último marco</div>
                                                                    <div class="fw-semibold">Kickoff realizado</div>
                                                                    <div class="text-muted fs-12">25/08/2025 • Registro automático</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12 col-md-6 col-xl-3">
                                                    <div class="card border mb-0">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="avatar-sm me-2">
                                                                    <span class="avatar-title rounded-circle bg-light text-dark">
                                                                        <i class="ti ti-alert-triangle"></i>
                                                                    </span>
                                                                </div>
                                                                <div class="flex-grow-1">
                                                                    <div class="text-muted fs-12">Pendências críticas</div>
                                                                    <div class="fw-semibold">2 riscos abertos</div>
                                                                    <div class="text-muted fs-12">1 impedimento ativo</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12 col-md-6 col-xl-3">
                                                    <div class="card border mb-0">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="avatar-sm me-2">
                                                                    <span class="avatar-title rounded-circle bg-light text-dark">
                                                                        <i class="ti ti-steps"></i>
                                                                    </span>
                                                                </div>
                                                                <div class="flex-grow-1">
                                                                    <div class="text-muted fs-12">Próximo passo</div>
                                                                    <div class="fw-semibold">Contratação (etapa)</div>
                                                                    <div class="text-muted fs-12">Previsão: 02/09/2025</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Filtros -->
                                            <div class="card border mb-3">
                                                <div class="card-body">
                                                    <div class="row g-2 align-items-end">
                                                        <div class="col-12 col-lg-4">
                                                            <label class="form-label mb-1">Buscar</label>
                                                            <div class="input-group">
                                                                <span class="input-group-text"><i class="ti ti-search"></i></span>
                                                                <input type="text" class="form-control" placeholder="Buscar por palavra-chave, decisão, marco, risco..." id="logSearchInput">
                                                            </div>
                                                        </div>

                                                        <div class="col-12 col-md-6 col-lg-2">
                                                            <label class="form-label mb-1">Tipo</label>
                                                            <select class="form-select" id="logTypeFilter">
                                                                <option value="">Todos</option>
                                                                <option value="status">Atualização de status</option>
                                                                <option value="milestone">Marco/entrega</option>
                                                                <option value="decision">Decisão</option>
                                                                <option value="risk">Risco/impedimento</option>
                                                                <option value="scope">Mudança de escopo</option>
                                                                <option value="meeting">Reunião/comunicação</option>
                                                                <option value="approval">Aprovação/validação</option>
                                                                <option value="file">Documento/arquivo</option>
                                                                <option value="note">Observação</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-12 col-md-6 col-lg-2">
                                                            <label class="form-label mb-1">Autor</label>
                                                            <select class="form-select" id="logAuthorFilter">
                                                                <option value="">Todos</option>
                                                                <option value="sammys">Sammys Cezar</option>
                                                                <option value="maria">Maria Silva</option>
                                                                <option value="joao">João Santos</option>
                                                                <option value="leonardo">Leonardo Queiroz</option>
                                                                <option value="sistema">Sistema GoMAP</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-12 col-md-6 col-lg-2">
                                                            <label class="form-label mb-1">Período</label>
                                                            <select class="form-select" id="logRangeFilter">
                                                                <option value="30">Últimos 30 dias</option>
                                                                <oringg</option>
                                                                <option value="7">Últimos 7 dias</option>
                                                                <option value="90">Últimos 90 dias</option>
                                                                <option value="all">Tudo</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-12 col-md-6 col-lg-2">
                                                            <div class="d-flex gap-2">
                                                                <button class="btn btn-light w-100" type="button" id="logClearFilters">
                                                                    <i class="ti ti-eraser me-1"></i>Limpar
                                                                </button>
                                                                <button class="btn btn-primary w-100" type="button" id="logApplyFilters">
                                                                    <i class="ti ti-filter me-1"></i>Filtrar
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-2 text-muted fs-12">
                                                        Dica: use “Tipo” para encontrar rapidamente decisões, mudanças de escopo e riscos.
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Timeline -->
                                            <div class="card border mb-0">
                                                <div class="card-body">

                                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                                        <div class="fw-semibold">Timeline</div>
                                                        <div class="dropdown">
                                                            <button class="btn btn-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                                Mais recentes
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#">Mais recentes</a></li>
                                                                <li><a class="dropdown-item" href="#">Mais antigas</a></li>
                                                                <li><a class="dropdown-item" href="#">Somente fixadas</a></li>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                    <!-- item -->
                                                    <div class="border rounded p-3 mb-2 log-item"
                                                         data-type="decision" data-author="sammys" data-text="Estudo preliminar aprovado diretoria contratação empresa projetos">
                                                        <div class="d-flex align-items-start gap-3">
                                                            <div class="avatar-sm flex-shrink-0">
                                                                <span class="avatar-title rounded-circle bg-light text-dark">
                                                                    <i class="ti ti-gavel"></i>
                                                                </span>
                                                            </div>

                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-wrap gap-2 align-items-center">
                                                                    <span class="badge badge-label text-bg-light">DECISÃO</span>
                                                                    <div class="fw-semibold">Estudo preliminar aprovado pela diretoria</div>
                                                                    <div class="text-muted ms-auto fs-12">28/08/2025 13:00</div>
                                                                </div>

                                                                <div class="text-muted fs-12 mt-1">
                                                                    Sammys Cezar • Diretoria
                                                                    <span class="mx-2">•</span>
                                                                    Impacto: <span class="badge badge-soft-warning fs-xxs">Médio</span>
                                                                    <span class="mx-2">•</span>
                                                                    Relacionado: <span class="badge badge-soft-primary fs-xxs">#Contratação</span>
                                                                </div>

                                                                <p class="mb-2 mt-2">
                                                                    O estudo preliminar do novo SEDI foi aprovado pela diretoria. Próxima etapa: contratação da empresa de projetos.
                                                                </p>

                                                                <div class="d-flex flex-wrap gap-2">
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-paperclip me-1"></i>Anexos (1)</a>
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-eye me-1"></i>Ver mais</a>
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-pin me-1"></i>Fixar</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- item -->
                                                    <div class="border rounded p-3 mb-2 log-item"
                                                         data-type="meeting" data-author="maria" data-text="Discussão requisitos funcionais prédio ambientes capacidade">
                                                        <div class="d-flex align-items-start gap-3">
                                                            <div class="avatar-sm flex-shrink-0">
                                                                <span class="avatar-title rounded-circle bg-light text-dark">
                                                                    <i class="ti ti-users"></i>
                                                                </span>
                                                            </div>

                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-wrap gap-2 align-items-center">
                                                                    <span class="badge badge-label text-bg-light">REUNIÃO</span>
                                                                    <div class="fw-semibold">Requisitos funcionais do prédio definidos</div>
                                                                    <div class="text-muted ms-auto fs-12">26/08/2025 15:14</div>
                                                                </div>

                                                                <div class="text-muted fs-12 mt-1">
                                                                    Maria Silva • Planejamento
                                                                    <span class="mx-2">•</span>
                                                                    Relacionado: <span class="badge badge-soft-primary fs-xxs">#Escopo</span>
                                                                </div>

                                                                <p class="mb-2 mt-2">
                                                                    Discussão sobre requisitos funcionais do prédio. Definidos os principais ambientes e capacidade.
                                                                </p>

                                                                <div class="d-flex flex-wrap gap-2">
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-paperclip me-1"></i>Anexos (0)</a>
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-eye me-1"></i>Ver mais</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- item -->
                                                    <div class="border rounded p-3 mb-2 log-item"
                                                         data-type="file" data-author="joao" data-text="Relatório técnico topográfico geotécnico terreno anexo">
                                                        <div class="d-flex align-items-start gap-3">
                                                            <div class="avatar-sm flex-shrink-0">
                                                                <span class="avatar-title rounded-circle bg-light text-dark">
                                                                    <i class="ti ti-file-description"></i>
                                                                </span>
                                                            </div>

                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-wrap gap-2 align-items-center">
                                                                    <span class="badge badge-label text-bg-light">DOCUMENTO</span>
                                                                    <div class="fw-semibold">Relatório técnico anexado</div>
                                                                    <div class="text-muted ms-auto fs-12">27/08/2025 09:30</div>
                                                                </div>

                                                                <div class="text-muted fs-12 mt-1">
                                                                    João Santos • Engenharia
                                                                    <span class="mx-2">•</span>
                                                                    Relacionado: <span class="badge badge-soft-primary fs-xxs">#Terreno</span>
                                                                </div>

                                                                <p class="mb-2 mt-2">
                                                                    Finalizada a análise topográfica e geotécnica do terreno. Relatório técnico em anexo.
                                                                </p>

                                                                <div class="d-flex flex-wrap gap-2">
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-paperclip me-1"></i>Anexos (1)</a>
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-download me-1"></i>Baixar relatório</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- item -->
                                                    <div class="border rounded p-3 mb-2 log-item"
                                                         data-type="milestone" data-author="leonardo" data-text="Kickoff realizado cronograma inicial responsabilidades equipe">
                                                        <div class="d-flex align-items-start gap-3">
                                                            <div class="avatar-sm flex-shrink-0">
                                                                <span class="avatar-title rounded-circle bg-light text-dark">
                                                                    <i class="ti ti-flag"></i>
                                                                </span>
                                                            </div>

                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-wrap gap-2 align-items-center">
                                                                    <span class="badge badge-label text-bg-light">MARCO</span>
                                                                    <div class="fw-semibold">Kickoff do projeto concluído</div>
                                                                    <div class="text-muted ms-auto fs-12">25/08/2025 11:45</div>
                                                                </div>

                                                                <div class="text-muted fs-12 mt-1">
                                                                    Leonardo Queiroz • PMO
                                                                    <span class="mx-2">•</span>
                                                                    Relacionado: <span class="badge badge-soft-primary fs-xxs">#Kickoff</span>
                                                                </div>

                                                                <p class="mb-2 mt-2">
                                                                    Reunião de kickoff realizada com sucesso. Apresentação do cronograma inicial e definição das responsabilidades da equipe.
                                                                </p>

                                                                <div class="d-flex flex-wrap gap-2">
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-paperclip me-1"></i>Anexos (1)</a>
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-eye me-1"></i>Ver ata</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- item automático -->
                                                    <div class="border rounded p-3 mb-2 log-item"
                                                         data-type="status" data-author="sistema" data-text="Projeto iniciado equipes notificadas recursos alocados">
                                                        <div class="d-flex align-items-start gap-3">
                                                            <div class="avatar-sm flex-shrink-0">
                                                                <span class="avatar-title rounded-circle bg-light text-success">
                                                                    <i class="ti ti-robot"></i>
                                                                </span>
                                                            </div>

                                                            <div class="flex-grow-1">
                                                                <div class="d-flex flex-wrap gap-2 align-items-center">
                                                                    <span class="badge badge-soft-success fs-xxs">AUTOMÁTICO</span>
                                                                    <span class="badge badge-label text-bg-light">STATUS</span>
                                                                    <div class="fw-semibold">Projeto iniciado no sistema</div>
                                                                    <div class="text-muted ms-auto fs-12">24/08/2025 10:00</div>
                                                                </div>

                                                                <div class="text-muted fs-12 mt-1">
                                                                    Sistema GoMAP
                                                                </div>

                                                                <p class="mb-2 mt-2">
                                                                    O projeto foi oficialmente iniciado no sistema. Todas as equipes foram notificadas e os recursos foram alocados.
                                                                </p>

                                                                <div class="d-flex flex-wrap gap-2">
                                                                    <a href="#" class="btn btn-light btn-sm"><i class="ti ti-eye me-1"></i>Ver detalhes</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="text-center mt-3">
                                                        <a href="#" class="btn btn-link">Carregar mais entradas...</a>
                                                    </div>

                                                </div>
                                            </div>

                                        </div><!-- end tab diary -->

                                    </div><!-- end tab-content -->
                                </div><!-- end card-body -->
                            </div><!-- end card -->
                        </div><!-- end col -->

                    </div><!-- end col -->
                </div><!-- end row -->

            </div>
        </div>
    </div>
    <!-- END wrapper -->

    <!-- Modal: Nova entrada -->
    <div class="modal fade" id="modalNewLogEntry" tabindex="-1" aria-labelledby="modalNewLogEntryLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalNewLogEntryLabel">Nova entrada — Diário de bordo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>

                <div class="modal-body">
                    <form id="formNewLogEntry" novalidate>
                        <div class="row g-2">
                            <div class="col-12 col-md-4">
                                <label class="form-label">Tipo de evento</label>
                                <select class="form-select" id="newLogType" required>
                                    <option value="" selected disabled>Selecione...</option>
                                    <option value="status">Atualização de status</option>
                                    <option value="milestone">Marco/entrega</option>
                                    <option value="decision">Decisão</option>
                                    <option value="risk">Risco/impedimento</option>
                                    <option value="scope">Mudança de escopo</option>
                                    <option value="meeting">Reunião/comunicação</option>
                                    <option value="approval">Aprovação/validação</option>
                                    <option value="file">Documento/arquivo</option>
                                    <option value="note">Observação</option>
                                </select>
                            </div>

                            <div class="col-12 col-md-8">
                                <label class="form-label">Título</label>
                                <input type="text" class="form-control" id="newLogTitle" placeholder="Ex.: Fornecedor aprovado / Kickoff realizado / Risco identificado" required>
                            </div>

                            <div class="col-12">
                                <label class="form-label">Descrição</label>
                                <textarea class="form-control" id="newLogDesc" rows="4" placeholder="Descreva o que aconteceu (objetivo, impacto e próximos passos)."></textarea>
                            </div>

                            <div class="col-12 col-md-4">
                                <label class="form-label">Data e hora</label>
                                <input type="datetime-local" class="form-control" id="newLogDatetime">
                            </div>

                            <div class="col-12 col-md-4">
                                <label class="form-label">Impacto</label>
                                <select class="form-select" id="newLogImpact">
                                    <option value="baixo">Baixo</option>
                                    <option value="medio" selected>Médio</option>
                                    <option value="alto">Alto</option>
                                </select>
                            </div>

                            <div class="col-12 col-md-4">
                                <label class="form-label">Visibilidade</label>
                                <select class="form-select" id="newLogVisibility">
                                    <option value="publico" selected>Projeto (padrão)</option>
                                    <option value="interno">Interno</option>
                                </select>
                            </div>

                            <!-- Seções condicionais (mostram conforme tipo) -->
                            <div class="col-12">
                                <div class="border rounded p-3 d-none" id="sectionDecision">
                                    <div class="fw-semibold mb-2"><i class="ti ti-gavel me-1"></i>Campos de decisão</div>
                                    <div class="row g-2">
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">Responsável pela decisão</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Diretoria / Comitê / Gestor responsável">
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">Justificativa</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Parecer técnico / Priorização / Orçamento">
                                        </div>
                                    </div>
                                </div>

                                <div class="border rounded p-3 d-none mt-2" id="sectionRisk">
                                    <div class="fw-semibold mb-2"><i class="ti ti-alert-triangle me-1"></i>Campos de risco/impedimento</div>
                                    <div class="row g-2">
                                        <div class="col-12 col-md-4">
                                            <label class="form-label">Probabilidade</label>
                                            <select class="form-select">
                                                <option>Baixa</option>
                                                <option selected>Média</option>
                                                <option>Alta</option>
                                            </select>
                                        </div>
                                        <div class="col-12 col-md-4">
                                            <label class="form-label">Impacto</label>
                                            <select class="form-select">
                                                <option>Baixo</option>
                                                <option selected>Médio</option>
                                                <option>Alto</option>
                                            </select>
                                        </div>
                                        <div class="col-12 col-md-4">
                                            <label class="form-label">Status</label>
                                            <select class="form-select">
                                                <option selected>Aberto</option>
                                                <option>Mitigando</option>
                                                <option>Encerrado</option>
                                            </select>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Ação de mitigação / próximo passo</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Solicitar parecer jurídico / Ajustar cronograma / Abrir contratação">
                                        </div>
                                    </div>
                                </div>

                                <div class="border rounded p-3 d-none mt-2" id="sectionMilestone">
                                    <div class="fw-semibold mb-2"><i class="ti ti-flag me-1"></i>Campos de marco/entrega</div>
                                    <div class="row g-2">
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">Data do marco</label>
                                            <input type="date" class="form-control">
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">Evidência / referência</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Ata / Documento / Link / Número do processo">
                                        </div>
                                    </div>
                                </div>

                                <div class="border rounded p-3 d-none mt-2" id="sectionScope">
                                    <div class="fw-semibold mb-2"><i class="ti ti-arrows-exchange me-1"></i>Campos de mudança de escopo</div>
                                    <div class="row g-2">
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">O que mudou</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Inclusão de integração X / Remoção de requisito Y">
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label class="form-label">Aprovado por</label>
                                            <input type="text" class="form-control" placeholder="Ex.: Comitê / Diretoria / Patrocinador">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12">
                                <label class="form-label">Relacionar a</label>
                                <div class="row g-2">
                                    <div class="col-12 col-md-3">
                                        <input type="text" class="form-control" placeholder="#Tarefa (opcional)">
                                    </div>
                                    <div class="col-12 col-md-3">
                                        <input type="text" class="form-control" placeholder="#Risco (opcional)">
                                    </div>
                                    <div class="col-12 col-md-3">
                                        <input type="text" class="form-control" placeholder="#Entrega (opcional)">
                                    </div>
                                    <div class="col-12 col-md-3">
                                        <input type="text" class="form-control" placeholder="#Contrato/Doc (opcional)">
                                    </div>
                                </div>
                            </div>

                            <div class="col-12">
                                <label class="form-label">Anexos</label>
                                <input class="form-control" type="file" multiple>
                                <div class="text-muted fs-12 mt-1">Em protótipo: apenas UI.</div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnSaveLogEntry">
                        <i class="ti ti-device-floppy me-1"></i>Salvar entrada
                    </button>
                </div>
            </div>
        </div>
    </div>

    @@include('./partials/customizer.html')

    @@include('./partials/footer-scripts.html')

    <!-- E Charts js -->
    <script src="assets/plugins/echarts/echarts.min.js"></script>

    <!-- Dashboard Page js -->
    <script src="assets/js/pages/dashboard.js"></script>

    <!-- Diário de bordo (UI-only) -->
    <script>
        (function () {
            const typeSelect = document.getElementById('newLogType');
            const sections = {
                decision: document.getElementById('sectionDecision'),
                risk: document.getElementById('sectionRisk'),
                milestone: document.getElementById('sectionMilestone'),
                scope: document.getElementById('sectionScope'),
            };

            function hideAllSections() {
                Object.values(sections).forEach(el => el && el.classList.add('d-none'));
            }

            function showSectionByType(type) {
                hideAllSections();
                if (type === 'decision') sections.decision.classList.remove('d-none');
                if (type === 'risk') sections.risk.classList.remove('d-none');
                if (type === 'milestone') sections.milestone.classList.remove('d-none');
                if (type === 'scope') sections.scope.classList.remove('d-none');
            }

            if (typeSelect) {
                typeSelect.addEventListener('change', function () {
                    showSectionByType(this.value);
                });
            }

            // Filtros (protótipo simples: filtra por texto/tipo/autor)
            const searchInput = document.getElementById('logSearchInput');
            const filterType = document.getElementById('logTypeFilter');
            const filterAuthor = document.getElementById('logAuthorFilter');
            const applyBtn = document.getElementById('logApplyFilters');
            const clearBtn = document.getElementById('logClearFilters');

            function applyFilters() {
                const q = (searchInput?.value || '').trim().toLowerCase();
                const t = filterType?.value || '';
                const a = filterAuthor?.value || '';

                document.querySelectorAll('.log-item').forEach(item => {
                    const text = (item.getAttribute('data-text') || '').toLowerCase();
                    const type = item.getAttribute('data-type') || '';
                    const author = item.getAttribute('data-author') || '';

                    const okQ = !q || text.includes(q);
                    const okT = !t || type === t;
                    const okA = !a || author === a;

                    item.classList.toggle('d-none', !(okQ && okT && okA));
                });
            }

            applyBtn?.addEventListener('click', applyFilters);

            clearBtn?.addEventListener('click', function () {
                if (searchInput) searchInput.value = '';
                if (filterType) filterType.value = '';
                if (filterAuthor) filterAuthor.value = '';
                applyFilters();
            });

            document.getElementById('btnSaveLogEntry')?.addEventListener('click', function () {
                // protótipo: só valida campos obrigatórios
                const title = document.getElementById('newLogTitle');
                const type = document.getElementById('newLogType');

                if (!type?.value || !title?.value.trim()) {
                    alert('Preencha o tipo do evento e o título.');
                    return;
                }
                alert('Entrada salva (protótipo UI). Aqui você chamaria sua API e atualizaria a timeline.');
            });

            // inicial
            hideAllSections();
        })();
    </script>

</body>

</html>
